@use './mixins' as *;

@view-transition {
  navigation: auto;
}

body {
  font-weight: 400;
  font-size: 1.15rem;
  line-height: 1.5;
  font-family: var(--font-body);
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  text-shadow: rgba(0, 0, 0, 0.01) 0 0 1px;
  -webkit-text-size-adjust: 100%;
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  background-color: var(--background-color);
  color: var(--foreground-color);
}

// Tipografia titoli globale (design system)
h1,
h2,
h3,
h4,
h5,
h6 {
  color: var(--foreground-color);
  font-family: var(--font-heading, var(--font-body));
  line-height: 1.2;
  letter-spacing: -0.01em;
  font-weight: 700;
}

h1 { font-size: clamp(2rem, 1.5rem + 1.8vw, 3rem); margin-block: 1.25em 0.6em; }
h2 { font-size: clamp(1.75rem, 1.2rem + 1.2vw, 2.25rem); margin-block: 1.2em 0.6em; }
h3 { font-size: clamp(1.5rem, 1.1rem + 0.9vw, 1.875rem); margin-block: 1.1em 0.5em; }
h4 { font-size: clamp(1.25rem, 1.05rem + 0.6vw, 1.5rem); margin-block: 1em 0.5em; }
h5 { font-size: 1.125rem; margin-block: 0.85em 0.4em; }
h6 { font-size: 1rem; margin-block: 0.75em 0.35em; text-transform: none; }

// Paragrafi e contenuto base
p { margin-block: 0.85em; }

ul,
ol { margin-block: 1em; padding-inline-start: 1.25rem; }
ul { list-style: disc; }
ol { list-style: decimal; }
li { margin-block: 0.35em; }

blockquote {
  border-inline-start: 4px solid var(--brand-500, #1f63ff);
  padding-inline-start: 1rem;
  margin-block: 1.25em;
  color: light-dark(var(--color-neutral-700), var(--color-neutral-300));
}

hr {
  border: none;
  height: 1px;
  background: light-dark(var(--color-neutral-300), var(--color-neutral-700));
  margin-block: 2rem;
}

pre,
code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}
code {
  background: light-dark(var(--color-neutral-200), var(--color-neutral-800));
  border-radius: 0.375rem;
  padding: 0.15em 0.35em;
}
pre {
  background: light-dark(var(--color-neutral-200), var(--color-neutral-800));
  border-radius: 0.5rem;
  padding: 1rem;
  overflow: auto;
}

a {
  transition: color var(--animation-speed-fast) var(--cubic-bezier);
  color: var(--link-color);

  &:where(:hover, :focus-visible) {
    color: var(--link-hover-color);
  }
}

main a,
footer a {
  @include text-decoration(var(--link-color), var(--link-hover-color));

  color: var(--link-color);

  &:where(:hover, :focus-visible) {
    color: var(--link-hover-color);
  }

  &.external-link {
    display: inline-flex;
    align-items: center;
    gap: var(--space-3xs);

    // small visual correction
    svg {
      margin-block-start: 3px;
    }
  }
}

// Tipografia ampia per pagine pillar (es. Chi sono)
.content-large {
  font-size: clamp(1.125rem, 1rem + 0.6vw, 1.375rem);
  line-height: 1.9;

  h2 {
    font-size: clamp(2rem, 1.5rem + 1.8vw, 3rem);
    line-height: 1.2;
    margin-block: 1.2em 0.6em;
  }

  p + p {
    margin-block-start: 1em;
  }

  img,
  figure {
    margin-block: 2rem;
  }
}

// Override coerenti per contenuti con plugin tipografico (.prose)
:where(.prose) {
  h1 { font-size: clamp(2rem, 1.5rem + 1.8vw, 3rem); line-height: 1.2; margin-block: 1.25em 0.6em; }
  h2 { font-size: clamp(1.75rem, 1.2rem + 1.2vw, 2.25rem); line-height: 1.25; margin-block: 1.2em 0.6em; }
  h3 { font-size: clamp(1.5rem, 1.1rem + 0.9vw, 1.875rem); line-height: 1.3; margin-block: 1.1em 0.5em; }
  h4 { font-size: clamp(1.25rem, 1.05rem + 0.6vw, 1.5rem); line-height: 1.35; margin-block: 1em 0.5em; }
  h5 { font-size: 1.125rem; line-height: 1.4; margin-block: 0.85em 0.4em; }
  h6 { font-size: 1rem; line-height: 1.4; margin-block: 0.75em 0.35em; }

  p { margin-block: 0.95em; }
  ul, ol { margin-block: 1em; padding-inline-start: 1.25rem; }
  li { margin-block: 0.35em; }
  blockquote { border-inline-start: 4px solid var(--brand-500, #1f63ff); padding-inline-start: 1rem; color: inherit; }
  hr { margin-block: 2rem; }
  code { background: light-dark(var(--color-neutral-200), var(--color-neutral-800)); border-radius: 0.375rem; padding: 0.15em 0.35em; }
  pre { background: light-dark(var(--color-neutral-200), var(--color-neutral-800)); border-radius: 0.5rem; padding: 1rem; overflow: auto; }
}

*:focus,
*:focus-visible {
  @include outline;
}

*:focus:not(:focus-visible) {
  outline: none;
  box-shadow: none;
}
