---
import Figure from './Figure.astro'

interface Props {
  src: string
  alt: string
  width?: number | string
  height?: number | string
  caption?: string
  reverse?: boolean
}

const { src, alt, width, height, caption, reverse = false } = Astro.props as Props
---

<section class="two-col content-large">
	<div class:list={["media", reverse && "order-2"]}>
		<div class="media-wrap">
			<Figure src={src} alt={alt} width={width} height={height} caption={caption} />
			<slot name="badge" />
		</div>
	</div>
	<div class:list={["content", reverse && "order-1"]}>
		<slot />
	</div>

	<style>
		.two-col {
			padding-block: 2rem;
		}

		@media (min-width: 768px) {
			.two-col {
				display: grid;
				grid-template-columns: 1fr 1fr;
				gap: 2rem;
				align-items: start;
			}
		}

		.media-wrap {
			position: relative;
		}

		.media :global(img) {
			inline-size: 100%;
			block-size: auto;
		}

		/* Lo slot badge viene posizionato dall'utente; forniamo default in alto a destra */
		:where([slot="badge"]) {
			position: absolute;
			top: -0.5rem;
			right: -0.5rem;
		}
	</style>
</section>


